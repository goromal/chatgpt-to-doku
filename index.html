<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="utf-8" />
  <title></title>
  <meta name="Description" content="" />
  <link rel="shortcut icon" href="" />
  <!--[if IE]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  <!--
    <link href="css/style.css" rel="stylesheet"/>
    -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
  <h1>
    ChatGPT saving Conversation <a href="https://en.wikipedia.org/wiki/Bookmarklet">Bookmarklet</a> (for DokuWiki)
  </h1>
  <p>Drag this link to your bookmarks <a id="bookmark">ChatGPT to Doku</a></p>
  <script>
    async function hash(branch) {
      try {
        var url = `https://api.github.com/repos/goromal/chatgpt-to-doku/commits?sha=${branch}`;
        var res = await fetch(url);
        var data = await res.json();
        return data[0].sha;
      } catch (e) {
        return branch;
      }
    }
    hash('master').then(hash => {
      return fetch(`https://cdn.jsdelivr.net/gh/goromal/chatgpt-to-doku@${hash}/bookmark.js`);
    }).then(res => res.text())
      .then(text => bookmark.href = text);
  </script>
</body>

</html>